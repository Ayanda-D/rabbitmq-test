
{
    simple_ha_cluster, [
        {cluster, [{localhost, [a]}]},
        {a, [
            {emulator_flags,
                "-boot start_sasl +W w "
                "+K true +A30 +P 1048576 "
                "-pa ebin "},
            {startup, [
                {handler, systest_slave},
                {link_to_parent, false}
            ]},
            {static, [
                {applications, [
                    %% NB: the kernel argument passed here *cannot* be set up in
                    %% the 'emulator_flags' section, as this prevents slave.erl
                    %% from starting the node correctly - not sure why...
                    {kernel, [{inet_default_connect_options, [{nodelay,true}]}]},
                    {sasl,   [{errlog_type, error}]},
                    {os_mon, [{start_cpu_sup, false},
                              {start_disksup, false},
                              {start_disksup, false}]},
                    {rabbit, [
                        {errlog_type, error},
                        {error_logger,
                            {file, "{{ scratch_dir }}/rabbitmq-a-mnesia.log"}},
                        {sasl_error_logger, 
                            {file, "{{ scratch_dir }}/rabbitmq-a-mnesia-sasl.log"}},
                        {tcp_listeners, [{"0.0.0.0", "5672"}]}
                    ]}
                ]}
            ]},
            {runtime, [
                {extra, [{systest, write_pid_file,
                            ["rabbitmq-a-mnesia.pid", "{{ scratch_dir }}"]},
                         {rabbit,  boot, []}]}
            ]}
        ]}
    ]
}.
